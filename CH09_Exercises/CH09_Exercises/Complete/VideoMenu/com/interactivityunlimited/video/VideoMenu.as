class com.interactivityunlimited.video.VideoMenu extends MovieClip {	var __movieList:Array;	var __selectedMovie:TextField;	var __selectedIndex:Number = -1;		var __menuFrame:MovieClip;	var __menuButton:MovieClip;	var __menuItems:Array;	var __menuExtended:Boolean = false;		var ourBroadcaster:Object;		public function VideoMenu() {		__movieList = new Array();	// create an empty array in case we haven't assigned any values				ourBroadcaster = new Object(); // set our object up as a broadcaster		AsBroadcaster.initialize(ourBroadcaster);				__menuButton = this.attachMovie( "Button", "__menuButton", 200 );		__menuButton._width = __selectedMovie._width;		__menuButton._height = __selectedMovie._height;				__menuButton.message = "processMenu";		__menuButton.addListener(this);	}		public function processMenu( theData:String ) {		if( __menuExtended ) {			for( var iterator:Number=0; iterator < __movieList.length; iterator++ ) {				this["vbutton" + iterator].removeMovieClip();			}						__menuFrame.removeMovieClip();						__menuExtended = false;		} else {			var menuFrameStart:Number = this._height;			__menuFrame = this.createEmptyMovieClip( "menuFrame", this.getNextHighestDepth() );			__menuFrame._y = this._height;			__menuFrame.beginFill( 0xffffff, 50 );	// transparent white			__menuFrame.moveTo( 0, 0 );			__menuFrame.lineTo( 200, 0 );			__menuFrame.lineTo( 200, __movieList.length * 35 );			__menuFrame.lineTo( 0, __movieList.length * 35 );			__menuFrame.lineTo( 0, 0 );						__menuFrame.filters = [new flash.filters.DropShadowFilter( 6, 45, 0, 65, 6, 6 )];			for( var iterator:Number=0; iterator < __movieList.length; iterator++ ) {				var vbtn:MovieClip = this.attachMovie( "Video Button", "vbutton" + iterator, this.getNextHighestDepth(), {_x:0, _y:(35 * iterator) + menuFrameStart });				vbtn.setOurMovie( __movieList[iterator] );				vbtn.addListener( this );			}						__menuExtended = true;		}	}	public function get selectedIndex():Number {		return __selectedIndex;	}		public function set selectedIndex( newIndex:Number ):Void {		__selectedIndex = newIndex;	}		[Inspectable(type='Array')]	public function get movieList():Array {		return __movieList;	}		public function set movieList( newList:Array ):Void {		__movieList = newList;	}			public function selectMovie( theMovie:String ):Void {		// find our movie in our array		processMenu();		var movieIndex:Number = -1;		for( var iterator:Number=0; iterator < __movieList.length; iterator++ ) {			if( theMovie == __movieList[iterator] ) {				movieIndex = iterator;				break;		// we found our movie - quit the loop			}		}				if( movieIndex != __selectedIndex ) {			__selectedIndex = movieIndex;			__selectedMovie.text = theMovie;			ourBroadcaster.broadcastMessage( "change", theMovie );		}	}		public function addListener( theListener:Object ):Boolean {		return ourBroadcaster.addListener( theListener );	}		public function removeListener( theListener:Object ):Boolean {		return ourBroadcaster.removeListener( theListener );	}}